<style >
  .card {

      border: none;
      box-shadow: 5px 6px 6px 2px #e9ecef;
      border-radius: 4px;

  }
  .table-wrapper {
          background: #fff;
          padding: 20px 25px;
          margin: 30px 0;
  		border-radius: 3px;
          box-shadow: 0 1px 1px rgba(0,0,0,.05);
      }
  	.table-title {
  		padding-bottom: 15px;
  		background: #435d7d;
  		color: #fff;
  		padding: 16px 30px;
  		margin: -20px -25px 10px;
  		border-radius: 3px 3px 0 0;
      }
      .table-title h2 {
  		margin: 5px 0 0;
  		font-size: 24px;
  	}
  	.table-title .btn-group {
  		float: right;
  	}
  	.table-title .btn {
  		color: #fff;
  		float: right;
  		font-size: 13px;
  		border: none;
  		min-width: 50px;
  		border-radius: 2px;
  		border: none;
  		outline: none !important;
  		margin-left: 10px;
  	}
  	.table-title .btn i {
  		float: left;
  		font-size: 21px;
  		margin-right: 5px;
  	}
  	.table-title .btn span {
  		float: left;
  		margin-top: 2px;
  	}
      table.table tr th, table.table tr td {
          border-color: #e9e9e9;
  		padding: 12px 15px;
  		vertical-align: middle;
      }
  	table.table tr th:first-child {
  		width: 60px;
  	}
  	table.table tr th:last-child {
  		width: 100px;
  	}
      table.table-striped tbody tr:nth-of-type(odd) {
      	background-color: #fcfcfc;
  	}
  	table.table-striped.table-hover tbody tr:hover {
  		background: #f5f5f5;
  	}
      table.table th i {
          font-size: 13px;
          margin: 0 5px;
          cursor: pointer;
      }
      table.table td:last-child i {
  		opacity: 0.9;
  		font-size: 22px;
          margin: 0 5px;
      }
  	table.table td a {
  		font-weight: bold;
  		color: #566787;
  		display: inline-block;
  		text-decoration: none;
  		outline: none !important;
  	}
  	table.table td a:hover {
  		color: #2196F3;
  	}
  	table.table td a.edit {
          color: #FFC107;
      }
      table.table td a.delete {
          color: #F44336;
      }
      table.table td i {
          font-size: 19px;
      }
  	table.table .avatar {
  		border-radius: 50%;
  		vertical-align: middle;
  		margin-right: 10px;
  	}
      .pagination {
          float: right;
          margin: 0 0 5px;
      }
      .pagination li a {
          border: none;
          font-size: 13px;
          min-width: 30px;
          min-height: 30px;
          color: #999;
          margin: 0 2px;
          line-height: 30px;
          border-radius: 2px !important;
          text-align: center;
          padding: 0 6px;
      }
      .pagination li a:hover {
          color: #666;
      }
      .pagination li.active a, .pagination li.active a.page-link {
          background: #03A9F4;
      }
      .pagination li.active a:hover {
          background: #0397d6;
      }
  	.pagination li.disabled i {
          color: #ccc;
      }
      .pagination li i {
          font-size: 16px;
          padding-top: 6px
      }
</style>
{% extends './index.html' %}
{% load humanize %}
{% load static %}

{% block content %}


<div class="row">
  <div class="col-md-12">
    <img src="{% static 'webpages/ima.jpeg'%}" width="85" style="float: left;">
    <h4 class="card-title text-dark my-4" style="float: left; margin-left: 10px;font-family: quartz">Statistique Sur Le Document <b class="text-danger">{{archive.titre}}</b></h4>
  </div>
</div>



<div class="container">
<div class="row">
  <div class="col-md-5">
    <div class="card">
      <div class="card-body">
    <h5 class="text-danger" style="font-family:quartz">Informations Generale Sur Le Document</h5>
    <h6 style="font-weight:bold">Index Du Fichier
        <b class="text-primary">{{archive.index}}</b>
    </h6>
    <h6 style="font-weight:bold">Titre
      <b class="text-primary">{{archive.titre}}</b>
    </h6>

    <h6 style="font-weight:bold">Auteur
        <b class="text-primary">{{archive.auteur}}</b>
    </h6>

    <h6 style="font-weight:bold">Date D'archivage

        <b class="text-primary">{{archive.date_enregistrement}}</b>
    </h6>

    <h6 style="font-weight:bold">Nom Du Fichier</h6>
        <b class="text-primary">{{archive.file}}</b>

    <h6 style="font-weight:bold">Description
        <b class="text-primary">{{archive.description}}</b>
    </h6>
    <h6 style="font-weight:bold">Taille Du Fichier
        <b class="text-primary">{{archive.taille}} {{archive.unite}}</b>
    </h6>

      <h6 style="font-weight:bold">Provenance Du Fichier
        <b class="text-primary">{{archive.provenance}}</b>
    </h6>
    <h6 style="font-weight:bold">Source De Financement
        <b class="text-primary">{{archive.source_financement}}</b>
    </h6>
    <h6 style="font-weight:bold">Nombre De Telechargement</h6>

    <h6 style="font-weight:bold">Nombre D'utilisateur Ayant consulté</h6>

    <h6 style="font-weight:bold">Derniere Consultation Faite Par</h6>

    <h6 style="font-weight:bold">Dernier Telechargement Fait Par</h6>
      </div>

    </div>

  </div>
  <div class="col-md-7">
    <div class="chart-container" style="position: relative; height:20vh; width:50vw">
        <canvas id="chart"></canvas>
    </div>

  </div>
  <div class="container">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row">
          <div class="col-sm-6">
            <h2>Utilisateurs Ayant Consulté Le Document <b>{{archive.titre}}</b></h2>
          </div>
       <div class="col-sm-6">
           <a class="btn btn-success" data-toggle="modal" data-target="#exampleModal"><i class="fa fa-chart-line">&#xE147;</i> <span>Consultation Par Periode</span></a>
           <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                 <div class="modal-dialog">
                   <div class="modal-content">
                     <div class="modal-header">
                       <h5 class="modal-title" id="exampleModalLabel">Nombre De Consultation Par Periode </h5>
                       <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                         <span aria-hidden="true">&times;</span>
                       </button>
                     </div>
                     <div class="modal-body">
                       ...
                     </div>
                     <div class="modal-footer">
                       <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>

                     </div>
                   </div>
                 </div>
                </div>
            <a href="#" class="btn btn-danger" data-toggle="modal"><i class="fa fa-print">&#xE15C;</i> <span>Imprimer</span></a>
            </div>
        </div>
      </div>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>

            </th>

            <th>Email</th>
            <th>Adresse IP</th>
            <th>Date Consultation</th>

          </tr>
        </thead>
        <tbody>
          {%for consultation_logs in consultation_log%}
          {%if consultation_logs.document_id == archive.id%}
          <tr>
            <td>

            </td>
            <td>{{consultation_logs.user_id.email}}</td>
            <td>{{consultation_logs.user_ip}}</td>
            <td>{{consultation_logs.consultation_datetime}}</td>


          </tr>
          {%endif%}
          {%endfor%}
        </tbody>
      </table>

    </div>
  </div>
  <!-- Edit Modal HTML -->

  <!-- Edit Modal HTML -->

  <!-- Delete Modal HTML -->

</div>

{%endblock%}

{%block script%}
<script type="text/javascript">

      const labels = ['January', 'February', 'March', 'April', 'May', 'June', 'July'];
      const data = {
        labels: labels,
        datasets: [{
          label: 'My First Dataset',
          data: [65, 59, 80, 81, 56, 55, 40],
          backgroundColor: [
            'rgba(255, 99, 132, 0.2)',
            'rgba(255, 159, 64, 0.2)',
            'rgba(255, 205, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(201, 203, 207, 0.2)'
          ],
          borderColor: [
            'rgb(255, 99, 132)',
            'rgb(255, 159, 64)',
            'rgb(255, 205, 86)',
            'rgb(75, 192, 192)',
            'rgb(54, 162, 235)',
            'rgb(153, 102, 255)',
            'rgb(201, 203, 207)'
          ],
          borderWidth: 1
        }]
      };

      const config = {
        type: 'doughnut',
        data: data,
        options: {}
      };

      var myChart = new Chart(
        document.getElementById('chart'),
        config
      );

</script>


{%endblock%}
