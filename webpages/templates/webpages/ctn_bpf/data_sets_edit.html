<style>
    
	*
	{
	  margin: 0;
	  padding: 0;
	  font-family: "montserrat", sans-serif;
	}
	
	.testimonials
	{
	  padding: 40px 0;
	  background: #f1f1f1;
	  color: #434343;
	  text-align: center;
	}
	
	.testimonial-inner
	{
	  max-width: 1200px;
	  margin: auto;
	  overflow: hidden;
	  padding: 0 20px;
	}
	
	.border
	{
	  width: 160px;
	  height: 5px;
	  background: #6ab04c;
	  margin: 26px auto;
	}
	
	.row
	{
	  display: flex;
	  flex-wrap: wrap;
	  justify-content: center;
	}
	
	.col
	{
	  flex: 33.33%;
	  max-width: 33.33%;
	  box-sizing:  border-box;
	  padding: 15px;
	}
	
	.testimonial
	{
	  background: #fff;
	  padding: 30px;
	}
	
	.testimonial img
	{
	  width: 100px;
	  height: 100px;
	  background-position: 50% 50%;
		  background-size: cover;
		  background-repeat: no-repeat;
	 
	}
	
	.name
	{
	  font-size: 20px;
	  text-transform: uppercase;
	  margin: 20px 0;
	}
	
	.stars
	{
	  color: #f0932b;
	  margin-bottom: 20px;
	}
	
	@media screen and (max-width: 960px)
	{
	  .col
	  {
		flex: 100%;
		max-width: 80%;
	  }
	}
  
  
  
	*{
	  outline:none;
	}
	/* spacer */
	.spacer{
	  height:150px;
	  width:100%;
	}
	.spacer2{
	  height:20px;
	  width:100%;
	}
	/* spacer ends */
	
	/* slider styles */
	.sd_master_wrapper{
	  position: relative;	
	  
	  margin:0 auto;
	  padding:0;
	  border-radius:10px;
	 
	}
	.sdtestBg3{
	  height: 100%;
		width: 80%;
		background: #fff;
		position: absolute;
		bottom: -40px;
		left: 10%;
		border-radius: 20px;
		box-shadow: 0px 18px 52.8537px rgb(215 228 249 / 50%);
	  z-index:1;
	}
	.sdtestBg2{
	  height: 100%;
		width: 90%;
		background: #fff;
		position: absolute;
		bottom: -22px;
		left: 5%;
		border-radius: 20px;
		box-shadow: 0px 18px 52.8537px rgb(215 228 249 / 50%);
	  z-index:2;
	}
	
	.sd_scroll {
	  height: auto;
		max-height: 180px;
		overflow: auto;
	}
	  
	.slideshow {
		position: relative;
		min-height: 300px;
		height: auto;
		background: #fff;
		box-shadow: 0px 18px 52.8537px rgba(215, 228, 249, 0.5);
		border-radius: 20px;
		background-image: url(https://farsighttechnologies.com/wp-content/uploads/2021/03/quote1.png), url(https://farsighttechnologies.com/wp-content/uploads/2021/03/quote.png);
		background-position: top 15px left 15px, bottom 40% right 15px;
		background-repeat: no-repeat;
		background-size: 180px, 180px;
	  z-index:3;
	}
</style>
<link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet">

{% extends './entities.html' %}
{% load static %}

{% block add_title %} 
Formulaires de Donnees - Edition
{% endblock %}

{% block search_filters %}

<div class="mb-3 text-success">	
	<small class="badge badge-success">	 Etape 1/2 : Creation des Elements du Formulaire</small>
	{% if dataset != None %}
	<a href="/data_sets/design/{{dataset.id}}/"><small class="badge"> Etape 2/2 : Edition & Design du Formulaire</small></a>
	{% endif %}
</div>

<div id="editableDIV" class="d-none">
	<div class="myeditablediv p-2" style="height:400px;background:red;border:1px solid #aaa;" id="myeditablediv2"></div>
</div>


{% endblock %}

{% block style %}
<style type="text/css">
	textarea{
		min-height: 5000px;
	}
</style>
{% endblock %}

{% block table %}
<form method="post" action="/data_set/modif/{{dataset.id}}/">
{% csrf_token%}



  
<div class="container">
    <div class="row">
      <div class="col-md-12">
                  <hr class="bg-dark p-2"/>
                 
<div class="sd_master_wrapper">	
	<div class="sdtestBg2"></div>
	<div class="sdtestBg3"></div>
	<div class="slideshow">
		
		<div class="content"> <!-- slide 1 -->
		
			<div class="btnNtxt"> 
				<div class="sdAllContent"> 
					
					<div class="sd_scroll">
					<h1 class="sdCustomSliderHeadig" style="font-weight: bold;font-family: forte;">MISE A JOUR DU FORMULAIRE {{data_set.m_name}}</h1> 
					</div>
					<div class="row">
						<div class="col-md-9">
					<label style="font-weight:bold">Nom du Formulaire</label>
					<input value="{{data_set.m_name}}" type="text" class="form-control" name="form_name">
					<hr class="p-2 bg-dark"/>		
				</div>
				

				<div class="col-md-9">
					<h4 style="font-weight:bold" class="text-center text-primary my-4">Sélectionnez Les Structures</h4>
					<div class="row">
						<div class="col-md-6">
							<h2 style="font-weight:bold; font-family: forte;">Structures Liées :</h2>
							<ul>
								{% for v in data_set.m_structures.all %}
									
										<div class="form-check">
											<input class="form-check-input" type="checkbox" id="linked-{{ v.id }}" name="structure" value="{{ v.id }}" checked>
											<label class="form-check-label" for="linked-{{ v.id }}">{{ v }}</label>
										</div>
									
								{% empty %}
									<li>Aucune structure liée.</li>
								{% endfor %}
							</ul>
						</div>
				
						<div class="col-md-6">
							<h2 style="font-weight:bold; font-family: forte;">Structures Non Liées :</h2>
							<ul>
								<div id="structures-list">  
									{% for structure in unlinked_structures %}  
										<div class="form-check structure-item">  
											<input class="form-check-input" type="checkbox" id="unlinked-{{ structure.id }}" name="structure" value="{{ structure.id }}">  
											<label class="form-check-label" for="unlinked-{{ structure.id }}">{{ structure.nom }}</label>  
										</div>  
									{% empty %}  
										<li>Toutes les structures sont liées.</li>  
									{% endfor %}  
								</div>  
								<div id="structures-list">  
									{% for structure in unlinked_structures %}  
										<div class="form-check structure-item">  
											<input class="form-check-input" type="checkbox" id="unlinked-{{ structure.id }}" name="structure" value="{{ structure.id }}">  
											<label class="form-check-label" for="unlinked-{{ structure.id }}">{{ structure.nom }}</label>  
										</div>  
									{% empty %}  
										<li>Toutes les structures sont liées.</li>  
									{% endfor %}  
								</div>  
								
								<button id="show-more" style="display: none;" class="btn btn-dark" type="button">Voir plus</button>  
								<button id="show-less" style="display: none;" class="btn btn-dark" type="button">Voir moins</button>  
							 
							</ul>
						</div>
					</div>
					</div>
					</div>
			
<hr class="p-2 bg-dark"/>
<h4 style="font-weight:bold" class="text-center text-primary my-4">Sélectionnez Les Elements De Donnees</h4>
<div class="row">  
<div class="col-md-6">  
	<h5 style="font-weight:bold; font-family: forte;">Éléments De Données Liées :</h5>  
	<ul id="linked-list">  
		{% for v in data_set.m_dataelements.all %}  
			<div class="form-check linked-item">  
				<input class="form-check-input" type="checkbox" id="linked-{{ v.id }}" name="element" value="{{ v.id }}" checked>  
				<label class="form-check-label" for="linked-{{ v.id }}">{{ v }}</label>  
			</div>  
		{% empty %}  
			<li>Aucun élément lié.</li>  
		{% endfor %}  
	</ul>  

	<button id="show-more-linked" style="display: none;" type="button" class="btn btn-dark">Voir plus</button>  
	<button id="show-less-linked" style="display: none;" type="button" class="btn btn-dark">Voir moins</button>  
</div>  

<div class="col-md-6">  
	<h2 style="font-weight:bold; font-family: forte;">Éléments Non Liés :</h2>  
	<ul id="unlinked-list">  
		{% for elements in unlinked_element %}  
			<div class="form-check unlinked-item">  
				<input class="form-check-input" type="checkbox" id="unlinked-{{ elements.id }}" name="element" value="{{ elements.id }}">  
				<label class="form-check-label" for="unlinked-{{ elements.id }}">{{ elements.m_name }}</label>  
			</div>  
		{% empty %}  
			<li>Tous les éléments sont liés.</li>  
		{% endfor %}  
	</ul>  

	<button id="show-more-unlinked" style="display: none;" type="button" class="btn btn-dark">Voir plus</button>  
	<button id="show-less-unlinked" style="display: none;" type="button" class="btn btn-dark">Voir moins</button>  
</div>  
</div>  

</div>
<hr class="p-2 bg-dark"/>
<h4 style="font-weight:bold" class="text-center text-primary my-4">Sélectionnez Les Indicateurs</h4>
<div class="row">  
<div class="col-md-6">  
	<h5 style="font-weight:bold; font-family: forte;">Indicateurs Liés :</h5>  
	<ul id="linked-indicator-list">  
		{% for v in data_set.m_indicateurs.all %}  
			<div class="form-check linked-indicator">  
				<input class="form-check-input" type="checkbox" id="linked-{{ v.id }}" name="indicateur" value="{{ v.id }}" checked>  
				<label class="form-check-label" for="linked-{{ v.id }}">{{ v }}</label>  
			</div>  
		{% empty %}  
			<li>Aucun Indicateur lié.</li>  
		{% endfor %}  
	</ul>  

	<button id="show-more-linked-indicators" style="display: none;"  type="button" class="btn btn-dark">Voir plus</button>  
	<button id="show-less-linked-indicators" style="display: none;"  type="button" class="btn btn-dark">Voir moins</button>  
</div>  

<div class="col-md-6">  
	<h2 style="font-weight:bold; font-family: forte;">Indicateurs Non Liés :</h2>  
	<ul id="unlinked-indicator-list">  
		{% for indicateurs in unlinked_indicateur %}  
			<div class="form-check unlinked-indicator">  
				<input class="form-check-input" type="checkbox" id="unlinked-{{ indicateurs.id }}" name="indicateur" value="{{ indicateurs.id }}">  
				<label class="form-check-label" for="unlinked-{{ indicateurs.id }}">{{ indicateurs.m_name }}</label>  
			</div>  
		{% empty %}  
			<li>Tous les Indicateurs sont liés.</li>  
		{% endfor %}  
	</ul>  

	<button id="show-more-unlinked-indicators" style="display: none;" type="button" class="btn btn-dark">Voir plus</button>  
	<button id="show-less-unlinked-indicators" style="display: none;" type="button" class="btn btn-dark">Voir moins</button>  
</div>  
</div>  
<hr class="p-2 bg-dark">


						<div class="col-md-7"></div>
						<button class="btn btn-dark my-2" type="submit" >Mise A Jour</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	
						</div>

	
		
			<div class="col-12 d-flex flex-wrap">
			{% if design_phase != None %}
			<div class="col-12 col-lg-9 d-flex">
				<input type="hidden" id="ephoxVariables_input" name="ephoxVariables_input" value="#">
				<div class="card col-12">	
					<div style='width:100%;height:100vh;max-height:500px;border:none;overflow:auto;' name="text" id="textPlan">
						<div class="d-flex deleteSBM">
							<div class="px-2"><small style="cursor:pointer;" onclick="insertText(this)">+ Zone de Design </small></div>
							<div class="px-2"><small style="cursor:pointer;" onclick="insertVariable(this)">+ Inserer une Variable</small></div>
							<div class="px-2"><small onclick="insertIndic(this)" style="cursor:pointer;">+ Inserer Indicateur</small></div>
						</div>
					</div>
				</div>
			</div>
			
			{% endif %}
			</div>
			

			
		</div>
	
	</div>

</div>
</div>
</div>
</div>

    </div>
    
  </div>

</div>


<script>  
	document.addEventListener("DOMContentLoaded", function() {  
		const items = document.querySelectorAll('.structure-item');  
		const showMoreButton = document.getElementById('show-more');  
		const showLessButton = document.getElementById('show-less');  

		// Masquer tous les éléments au-delà de 10  
		items.forEach((item, index) => {  
			if (index >= 10) {  
				item.style.display = 'none'; // Masquer l'élément  
			}  
		});  

		// Afficher le bouton 'Voir plus' si nécessaire  
		if (items.length > 10) {  
			showMoreButton.style.display = 'block';  
		}  

		// Ajouter l'événement click pour le bouton 'Voir plus'  
		showMoreButton.addEventListener('click', function() {  
			items.forEach(item => {  
				item.style.display = 'block'; // Afficher tous les éléments  
			});  
			showMoreButton.style.display = 'none'; // Masquer le bouton après  
			showLessButton.style.display = 'block'; // Afficher le bouton 'Voir moins'  
		});  

		// Ajouter l'événement click pour le bouton 'Voir moins'  
		showLessButton.addEventListener('click', function() {  
			items.forEach((item, index) => {  
				if (index >= 10) {  
					item.style.display = 'none'; // Masquer les éléments au-delà de 10  
				}  
			});  
			showMoreButton.style.display = 'block'; // Réafficher le bouton 'Voir plus'  
			showLessButton.style.display = 'none'; // Masquer le bouton 'Voir moins' après  
		});  
	});  
</script>  



<script>  
	document.addEventListener("DOMContentLoaded", function() {  
		// Gestion des éléments liés  
		const linkedItems = document.querySelectorAll('.linked-item');  
		const showMoreButtonLinked = document.getElementById('show-more-linked');  
		const showLessButtonLinked = document.getElementById('show-less-linked');  

		// Masquer tous les éléments au-delà de 10  
		linkedItems.forEach((item, index) => {  
			if (index >= 10) {  
				item.style.display = 'none'; // Masquer l'élément  
			}  
		});  

		// Afficher le bouton 'Voir plus' si nécessaire  
		if (linkedItems.length > 10) {  
			showMoreButtonLinked.style.display = 'block';  
		}  

		// Ajouter l'événement click pour le bouton 'Voir plus'  
		showMoreButtonLinked.addEventListener('click', function() {  
			linkedItems.forEach(item => {  
				item.style.display = 'block'; // Afficher tous les éléments  
			});  
			showMoreButtonLinked.style.display = 'none'; // Masquer le bouton après  
			showLessButtonLinked.style.display = 'block'; // Afficher le bouton 'Voir moins'  
		});  

		// Ajouter l'événement click pour le bouton 'Voir moins'  
		showLessButtonLinked.addEventListener('click', function() {  
			linkedItems.forEach((item, index) => {  
				if (index >= 10) {  
					item.style.display = 'none'; // Masquer les éléments au-delà des 10 premiers  
				}  
			});  
			showMoreButtonLinked.style.display = 'block'; // Réafficher le bouton 'Voir plus'  
			showLessButtonLinked.style.display = 'none'; // Masquer le bouton 'Voir moins'  
		});  


		// Gestion des éléments non liés  
		const unlinkedItems = document.querySelectorAll('.unlinked-item');  
		const showMoreButtonUnlinked = document.getElementById('show-more-unlinked');  
		const showLessButtonUnlinked = document.getElementById('show-less-unlinked');  

		// Masquer tous les éléments au-delà de 10  
		unlinkedItems.forEach((item, index) => {  
			if (index >= 10) {  
				item.style.display = 'none'; // Masquer l'élément  
			}  
		});  

		// Afficher le bouton 'Voir plus' si nécessaire  
		if (unlinkedItems.length > 10) {  
			showMoreButtonUnlinked.style.display = 'block';  
		}  

		// Ajouter l'événement click pour le bouton 'Voir plus'  
		showMoreButtonUnlinked.addEventListener('click', function() {  
			unlinkedItems.forEach(item => {  
				item.style.display = 'block'; // Afficher tous les éléments  
			});  
			showMoreButtonUnlinked.style.display = 'none'; // Masquer le bouton après  
			showLessButtonUnlinked.style.display = 'block'; // Afficher le bouton 'Voir moins'  
		});  

		// Ajouter l'événement click pour le bouton 'Voir moins'  
		showLessButtonUnlinked.addEventListener('click', function() {  
			unlinkedItems.forEach((item, index) => {  
				if (index >= 10) {  
					item.style.display = 'none'; // Masquer les éléments au-delà de 10  
				}  
			});  
			showMoreButtonUnlinked.style.display = 'block'; // Réafficher le bouton 'Voir plus'  
			showLessButtonUnlinked.style.display = 'none'; // Masquer le bouton 'Voir moins'  
		});  
	});  
</script>  

<script>  
document.addEventListener("DOMContentLoaded", function() {  
	// Gestion des indicateurs liés  
	const linkedIndicators = document.querySelectorAll('.linked-indicator');  
	const showMoreButtonLinked = document.getElementById('show-more-linked-indicators');  
	const showLessButtonLinked = document.getElementById('show-less-linked-indicators');  

	// Masquer tous les éléments au-delà de 10  
	linkedIndicators.forEach((item, index) => {  
		if (index >= 10) {  
			item.style.display = 'none'; // Masquer l'élément  
		}  
	});  

	// Afficher le bouton 'Voir plus' si nécessaire  
	if (linkedIndicators.length > 10) {  
		showMoreButtonLinked.style.display = 'block';  
	}  

	// Ajouter l'événement click pour le bouton 'Voir plus'  
	showMoreButtonLinked.addEventListener('click', function() {  
		linkedIndicators.forEach(item => {  
			item.style.display = 'block'; // Afficher tous les éléments  
		});  
		showMoreButtonLinked.style.display = 'none'; // Masquer le bouton après  
		showLessButtonLinked.style.display = 'block'; // Afficher le bouton 'Voir moins'  
	});  

	// Ajouter l'événement click pour le bouton 'Voir moins'  
	showLessButtonLinked.addEventListener('click', function() {  
		linkedIndicators.forEach((item, index) => {  
			if (index >= 10) {  
				item.style.display = 'none'; // Masquer les éléments au-delà de 10  
			}  
		});  
		showMoreButtonLinked.style.display = 'block'; // Réafficher le bouton 'Voir plus'  
		showLessButtonLinked.style.display = 'none'; // Masquer le bouton 'Voir moins'  
	});  

	// Gestion des indicateurs non liés  
	const unlinkedIndicators = document.querySelectorAll('.unlinked-indicator');  
	const showMoreButtonUnlinked = document.getElementById('show-more-unlinked-indicators');  
	const showLessButtonUnlinked = document.getElementById('show-less-unlinked-indicators');  

	// Masquer tous les éléments au-delà de 10  
	unlinkedIndicators.forEach((item, index) => {  
		if (index >= 10) {  
			item.style.display = 'none'; // Masquer l'élément  
		}  
	});  

	// Afficher le bouton 'Voir plus' si nécessaire  
	if (unlinkedIndicators.length > 10) {  
		showMoreButtonUnlinked.style.display = 'block';  
	}  

	// Ajouter l'événement click pour le bouton 'Voir plus'  
	showMoreButtonUnlinked.addEventListener('click', function() {  
		unlinkedIndicators.forEach(item => {  
			item.style.display = 'block'; // Afficher tous les éléments  
		});  
		showMoreButtonUnlinked.style.display = 'none'; // Masquer le bouton après  
		showLessButtonUnlinked.style.display = 'block'; // Afficher le bouton 'Voir moins'  
	});  

	// Ajouter l'événement click pour le bouton 'Voir moins'  
	showLessButtonUnlinked.addEventListener('click', function() {  
		unlinkedIndicators.forEach((item, index) => {  
			if (index >= 10) {  
				item.style.display = 'none'; // Masquer les éléments au-delà de 10  
			}  
		});  
		showMoreButtonUnlinked.style.display = 'block'; // Réafficher le bouton 'Voir plus'  
		showLessButtonUnlinked.style.display = 'none'; // Masquer le bouton 'Voir moins'  
	});  
});  
</script>  
{% endblock %}

