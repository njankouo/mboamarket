{% extends './data_sets.html' %}

{% block style %}
<style type="text/css">
	.myeditablediv{
		
		border: 1px solid;
	}
</style>
{% endblock %}

{% block search_filters %}

<div id="sdsd" class="d-none">
	{{dataset.m_formulaire}}
</div>
<h3> Formulaire de Donnee
   : <span class="h3 text-success"> Design du Formulaire {% if dataset != None %} {{dataset}} {% else %}  {% endif %} </span> </h3>

<div class="mb-3 text-success">	
	{% if dataset != None %}
	<a href="/data_sets/{{dataset.id}}/">
		<button type="button" class="btn btn-label-primary text-nowrap d-inline-flex position-relative me-4">
			Etape 1/2 : Creation des Elements du Formulaire
			<span class="position-absolute top-0 start-100 translate-middle badge badge-center rounded-pill bg-primary text-white">1</span>
		  </button>
		</a>
	{% endif %}



<button type="button" class="btn btn-label-primary text-nowrap d-inline-flex position-relative me-4">
	Etape 2/2 : Edition du Formulaire
	<span class="position-absolute top-0 start-100 translate-middle badge badge-center rounded-pill bg-primary text-white">2</span>
  </button>
</div>
<div id="editableDIV" class="d-none">
	<div class="myeditablediv p-2" style="border:1px solid #aaa;" id="myeditablediv"></div>
</div>
{% endblock %}

{% block table %}
<form method="POST" action="/save_gestion/" onsubmit="getTinyContent()">
{% csrf_token %}
<input type="hidden" name="form_design" id="form_design">
<input type="hidden" name="generator" value="d_s_1">
<input type="hidden" name="edit_or_create" value="e">
<input type="hidden" id="edit_id" name="edit_id" value="{{dataset.id}}">
<textarea style="display:none;" name="form_html" id="form_html"></textarea>
	<div>
	</div>
	<div class="col-lg-12 d-flex justify-content-between">
		<div class="col-lg-12 d-flex flex-wrap">
			<div style="padding:0px;" class="col-lg-12">
				
				<input type="hidden" id="ephoxVariables_input" name="ephoxVariables_input" value="#">
				<div class="card col-12">	
					<div style='width:100%;height:100vh;max-height:500px;border:none;overflow:auto;'name="text" id="textPlan">

					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-5 d-none flex-wrap">
			<div style="padding:0px;" class="col-lg-12">
				<div> Apercu du Resultat</div>
				<div class="card col-12">	
					<div class="card-body">
					<div style='width:100%;height:100vh;max-height:500px;border:none;overflow:auto;' name="text" class="v" id="textPlan_result">
						{{dataset.m_formulaire}}
					</div>
				</div>
				</div>
			</div>
		</div>		
	</div>
	<div class="my-2 mx-4">
		<input type="submit" class="btn btn-success mx-4" value="valider">
	</div>
</form>

{% endblock %}


{% block add_script %}
<script type="text/javascript">
	insertText(document.getElementById("textPlan"),true)
	function getTinyContent(){
		form_design = document.getElementById("form_design");
		myeditablediv = document.getElementsByClassName("myeditablediv")[1];
		form_design.value = myeditablediv.innerHTML;
	}
</script>
{% endblock %}